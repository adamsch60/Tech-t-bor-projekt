<!doctype html>
<html>

<head>
    <title>RoboClash</title>
    <meta charset="UTF-8">
    <meta name="description" content="Free Robot Programmer Gaming site">
    <meta name="keywords" content="robot,RoboClash,programming,game">
    <meta name="author" content="Ádám Schweitzer,Patrick Nanys">
    <link rel="stylesheet" type="text/css" href="robostyle.css">
    <link rel="shortcut icon" type="image/png" href="/favicon.png" />
    <style>
        .nav {
            text-transform: uppercase;
            list-style-type: none;
            margin: 0;
            padding: 0;
            overflow: hidden;
            position: absolute;
            background: #4F9C45;
            width: 200px;
        }

        .nav li {
            border-bottom: #424141 solid 2px;
        }

        .nav li a {
            display: block;
            color: white;
            text-align: left;
            padding: 16px;
            text-decoration: none;
            line-height: 20px;
        }

        .nav li a:hover {
            background-color: #1C5B26;
        }

        .naval {
            text-transform: uppercase;
            display: flex;
            position: absolute;
            top: 162px;
        }

        .naval a {
            width: 116px;
            background: #4F9C45;
            display: block;
            color: white;
            text-align: left;
            padding: 16px;
            text-decoration: none;
            line-height: 20px;
        }

        .naval:hover a {
            background-color: #1C5B26;
        }

        .naval:hover .navtri {
            border-left: 27px solid #1C5B26;
            border-top: 27px solid #1C5B26;
        }

        .navtri {
            position: relative;
            display: flex;
            width: 0;
            height: 0;
            border-left: 27px solid #4F9C45;
            border-top: 27px solid #4F9C45;
            border-bottom: 27px solid transparent;
            border-right: 27px solid transparent;
        }

        .editor {
            position: absolute!important;
            top: 160px;
            left: 250px;
            bottom: 50px;
            width: 80%;
            overflow-X: hidden;
            overflow-Y: auto;
            resize: none;
            visibility: visible;
        }

        .error {
            position: absolute!important;
            top: 160px;
            left: 250px;
            bottom: 50px;
            width: 80%;
            overflow-x: hidden;
            overflow-y: auto;
            resize: none;
            visibility: hidden;
            background: #161616;
            color: white;
            text-align: center;
            line-height: 40px;
        }

        .your_code {
            text-decoration: none;
            text-align: center;
            border: none;
            color: white;
            background: #424141;
            border-radius: 10px 10px 0px 0px;
            position: absolute;
            top: 160px;
            left: 250px;
            transform: translateY(-100%);
            width: 10%;
            font-size: 12px;
        }

        .your_code:hover {
            background: #4F9C45;
        }

        .error_message {
            text-decoration: none;
            text-align: center;
            border: none;
            color: white;
            background: #424141;
            border-radius: 10px 10px 0px 0px;
            position: absolute;
            top: 160px;
            left: 250px;
            transform: translateX(100%) translateY(-100%);
            width: 10%;
            font-size: 12px;
        }

        .error_message:hover {
            background: #4F9C45;
        }

        .compile {
            text-decoration: none;
            text-align: center;
            border: none;
            color: white;
            background: #424141;
            border-radius: 10px 10px 0px 0px;
            position: absolute;
            top: 160px;
            left: calc(250px + 80%);
            transform: translateX(-100%) translateY(-100%);
            width: 200px;
            font-size: 12px;
        }

        .compile:hover {
            background: #4F9C45;
        }

        .startnewcode {
            text-decoration: none;
            text-align: center;
            border: none;
            color: white;
            background: #424141;
            border-radius: 10px 10px 0px 0px;
            position: absolute;
            top: 250px;
            left: calc(100px + 75%);
            transform: translateX(-100%) translateY(-100%);
            width: 200px;
            font-size: 12px;
        }

        .startnewcode:hover {
            background: #4F9C45;
        }

        .outer_play:before {
            content: '';
            transform-origin: 100% 50%;
            transform: scale(0.5, 1);
            position: relative;
            display: flex;
            width: 0;
            height: 0;
            border-right: 50px solid #4F9C45;
            border-top: 50px solid transparent;
            border-bottom: 50px solid transparent;
        }

        .outer_play:after {
            content: '';
            /*position: inline;*/
            position: relative;
            display: flex;
            transform-origin: 0% 50%;
            transform: scale(0.5, 1);
            width: 0;
            height: 0;
            border-left: 50px solid #4F9C45;
            border-top: 50px solid transparent;
            border-bottom: 50px solid transparent;
        }

        .outer_play {
            display: flex;
            background: transparent;
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
        }

        .outer_play:hover::before {
            border-right-color: #1C5B26;
        }

        .outer_play:hover::after {
            border-left-color: #1C5B26;
        }

        .button {
            font-weight: bold;
            text-decoration: none;
            text-align: center;
            background-color: #4F9C45;
            border: none;
            color: white;
            line-height: 100px;
            font-size: 46px;
            width: 200px;
        }

        .outer_play:hover div {
            background-color: #1C5B26;
        }

        .outer_play a {
            display: block;
            color: white;
            text-decoration: none;
        }

        .test_table {
            display: flex;
            background: transparent;
            position: absolute;
            top: 300px;
            left: 20px;
            transform: translateY(-50%);
            background-color: #424141;
            color: white;
        }

        .test_button {
            display: flex;
            background-color: #4F9C45;
            border: 0px;
            padding-left: 20px;
            padding-right: 20px;
            padding-top: 5px;
            padding-bottom: 5px;
            color: white;
        }

        .test_button:hover {
            background-color: #1C5B26;
        }

        .test_button a {
            color: white;
        }

        a:link {
            text-decoration: none;
        }

        a:visited {
            text-decoration: none;
        }

        button {
        	cursor: pointer;
        }
    </style>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script>
        $(document).ready((function() {
            $(".History").click(function() {
                var data = {code: editor.getValue()};
                $.ajax({
                    type: "POST",
                    url: "/save",
                    data: data,
                    success: function(res) {
                        window.location.replace("/History");
                    }
                });
            });
        }));
        $(document).ready((function() {
            $(".Ladder").click(function() {
                var data = {code: editor.getValue()};
                $.ajax({
                    type: "POST",
                    url: "/save",
                    data: data,
                    success: function(res) {
                        window.location.replace("/Ladder");
                    }
                });
            });
        }));
        $(document).ready((function() {
            $(".Doc").click(function() {
                var data = {code: editor.getValue()};
                $.ajax({
                    type: "POST",
                    url: "/save",
                    data: data,
                    success: function(res) {
                        window.location.replace("/Doc");
                    }
                });
            });
        }));
        $(document).ready((function() {
            $(".your_code").click(function() {
                document.getElementById("editor").style.visibility = "visible";
                document.getElementById("error").style.visibility = "hidden";
            });
        }));
        $(document).ready((function() {
            $(".error_message").click(function() {
                document.getElementById("error").style.visibility = "visible";
                document.getElementById("editor").style.visibility = "hidden";
            });
        }));
        $(document).ready((function() {
            $(".compile").click(function() {
                document.getElementById("compile").disabled = true;
                var data = {code: editor.getValue()};
                $.ajax({
                    type: "POST",
                    url: "/code",
                    data: data,
                    success: function(res) {
                        console.log(res);
                        var sthh = "";
                        sthh = res;
                        var sth = res; //JSON.parse('['+sthh+']');
                        console.log(sth);
                        document.getElementById("compile").disabled = false;
                        if (sth[0] == 0) {
                            $(".error").css("background-color", "#ff5151");
                            $(".error").css("visibility", "visible");
                            $(".editor").css("visibility", "hidden");
                            $(".error").text(sth[1]);

                        } else {
                            $(".error").css("background-color", "green");
                            $(".error").css("visibility", "visible");
                            $(".editor").css("visibility", "hidden");
                            $(".error").text("Good job!  No errors!");
                        }
                    }
                });
            });
        }));
    </script>
</head>


<body>


    <ul class="nav">
        <li><a class="current" style="cursor: pointer;">Code</a></li>
        <li><a class="History" onclick="" style="cursor: pointer;">History</a></li>
        <li><a class="Ladder" onclick="" style="cursor: pointer;">Ladder</a></li>
    </ul>
    <div class="naval"><a class="Doc" onclick="" style="cursor: pointer;">Doc</a>
        <div class="navtri"></div>
    </div>

    <div id="elo" style="
    position: absolute;
    left: 75%;
    background: #484747;
    padding: 10px;
    padding-left: 20px;
    padding-right: 20px;
    color: #9c9c9c;">NaN</div>
    <div id="place" style="
    position: absolute;
    left: 65%;
    background: #484747;
    padding: 10px;
    padding-left: 20px;
    padding-right: 20px;
    color: #9c9c9c;">LP: NaN</div>

    <div class="outer_play">
        <div id="playB" class="button">
            <a href="/Play">
                <b>PLAY</b>
            </a>
        </div>
    </div>

    <div class="outer_play" style="top: 0px;left: 82%;transform: scale(0.3, 0.3);">
        <div id="playB" class="button" style="font-size: 36px;">
            <a href="/logout">
                Log Out
            </a>
        </div>
    </div>

    <div class="patreon_side" id="firstSocial">
        <a href="https://www.patreon.com/" target="_blank"><img src="patreon.png"></a>
    </div>
    <div class="facebook_side" id="secondSocial">
        <a href="https://www.facebook.com/" target="_blank"><img src="facebook.png"></a>
    </div>
    <div class="youtube_side" id="thirdSocial">
        <a href="https://www.youtube.com/" target="_blank"><img src="youtube.png"></a>
    </div>

    <div class="test_table">
        <table>
            <tr>
                <th colspan="2">Test your code against:</th>
            </tr>
            <tr>
                <td align="center">
	                <a href="/Test1">
	                	<button type="button" class="test_button">
	                        Test1
	                    </button>
	                </a>
                </td>
                <td align="center">
                	<a href="/Test2">
                		<button type="button" class="test_button">
	                        Test2
	                    </button>
                	</a>
                </td>
            </tr>
        </table>
    </div>
    



    <form class="code_field">
        <!-- <button type="button" class="startnewcode" onclick="">Start new code</button>-->
        <button type="button" id="your_code" class="your_code" onclick="">Your code</button>
        <button type="button" id="error_message" class="error_message" onclick="">Error message</button>
        <button type="button" id="compile" class="compile" onclick="">Compile</button>
        <div class="editor" name="editor" id="editor" rows="10" cols="30">Your Java code.</div>
        <div class="error" id="error">You have not compiled your code yet.</div>
    </form>
    <script src="src-min-noconflict/ace.js" type="text/javascript" charset="utf-8"></script>
    <script>
        var editor = ace.edit("editor");
        editor.setTheme("ace/theme/chaos");
        editor.session.setMode("ace/mode/java");
        editor.setShowPrintMargin(false);
    </script>

</body>
<script type="text/javascript">
    window.onload = function() {
        //editor.setValue("OHOHOHOHOHOHOOOO");
        $.ajax({
            type: "POST",
            url: "/get_code",
            data: "",
            success: function(res) {
                editor.setValue(res);
                //editor.setValue("OHOHOHOHOHOHOOOO");
            }
        })
        $.ajax({
            type: "POST",
            url: "/get_elo",
            data: "",
            success: function(res) {
                $("#elo").text(Math.round(res.elo) + " LP");
                //editor.setValue("OHOHOHOHOHOHOOOO");
            }
        })
        $.ajax({
            type: "GET",
            url: "/get_place",
            data: "",
            success: function(res) {
                place = res.place + 1;
                if (place%10 == 1)
                    $("#place").text(place + "st Place");
                else if (place%10 == 2)
                    $("#place").text(place + "nd Place");
                else if (place %10== 3)
                    $("#place").text(place + "rd Place");
                else
                    $("#place").text(place + "th Place");
                //editor.setValue("OHOHOHOHOHOHOOOO");
            }
        })

    };
</script>

</html>